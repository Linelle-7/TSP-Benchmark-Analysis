import pandas as pd
import matplotlib.pyplot as plt

import numpy as np




def read_and_compute_runtime(filename):
    df = pd.read_csv(filename, sep=r"\s+", header=None,
                     names=["id", "start", "pre_end", "solver_end"])

    time_format = "%d.%m.%Y-%H:%M:%S"
    df["start"] = pd.to_datetime(df["start"], format=time_format)
    df["solver_end"] = pd.to_datetime(df["solver_end"], format=time_format)
    df["runtime_s"] = (df["solver_end"] - df["start"]).dt.total_seconds()

    return df

files = {
    "Intel N95 (mp80)": r"C:\GitProjekts\PDA\runtimes.mp80",
    "Intel N100": r"C:\GitProjekts\PDA\runtimes.n100",
    "Raspberry Pi 5": r"C:\GitProjekts\PDA\runtimes.pi5"
}

data = {name: read_and_compute_runtime(path) for name, path in files.items()}

for name, df in data.items():
    mean = df["runtime_s"].mean()
    median = df["runtime_s"].median()
    var = df["runtime_s"].var()
    std = df["runtime_s"].std()
    max=df["runtime_s"].max()
    min=df["runtime_s"].min()
    

    print(f" {name}")
    print(f"  Mittelwert:         {mean:.2f} Sekunden")
    print(f"  Median:             {median:.2f} Sekunden")
    print(f"  Varianz:            {var:.2f}")
    print(f"  Standardabweichung: {std:.2f}")
    print(f"  Minimale Laufzeit:  {min:.2f} sekunden")
    print(f"  Maximale Laufzeit:  {max:.2f} sekunden")
    print()

plt.figure(figsize=(10, 6))

for name, df in data.items():
    
    runtimes_rounded = df["runtime_s"] #.round(1)
    counts = runtimes_rounded.value_counts().sort_index()
    #counts = counts[(counts.index >= 0) & (counts.index <= 800)]
    plt.plot(counts.index, counts.values, linewidth=1, label=name)

plt.xlabel("Laufzeit (Sekunden)")
plt.ylabel("HÃ¤ufigkeit")
plt.title("Verteilung der Laufzeiten â€“ Vergleich der Prozessoren")
#plt.xlim(-10, 600)
#plt.ylim(-10, 80)
plt.legend()
plt.grid(True, alpha=0.3)

plt.show()
